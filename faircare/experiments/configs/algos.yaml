# Algorithm-specific configurations including enhanced FairCare-FL v2

fedavg:
  training:
    algo: "fedavg"
  algo:
    weighted: true

fedprox:
  training:
    algo: "fedprox"
  algo:
    fedprox_mu: 0.01

qffl:
  training:
    algo: "qffl"
  algo:
    q: 2.0
    q_eps: 0.0001

afl:
  training:
    algo: "afl"
  algo:
    afl_lambda: 0.1
    afl_smoothing: 0.01

fairfate:
  training:
    algo: "fairfate"
  fairness:
    alpha: 1.0
    beta: 0.5
    gamma: 0.5
    delta: 0.1
    tau: 1.0
    epsilon: 0.01

# FairCare-FL v2.0 with Pareto optimization and CALT
faircare_fl:
  version: "2.0.0"
  training:
    algo: "faircare_fl"
  
  # Client-side CALT parameters
  fairness:
    # Component algorithm parameters (legacy)
    qffl_q: 2.0
    qffl_eps: 0.0001
    afl_eta: 0.1
    afl_smoothing: 0.01
    
    # FedProx
    prox_mu: 0.01
    
    # IRM and adversarial training
    lambda_irm: 0.5
    lambda_adv: 0.2
    use_mixup: true
    use_cia: true
    
    # Fairness metric weights
    alpha: 1.0           # EO gap weight
    beta: 0.5            # FPR gap weight  
    gamma: 0.5           # SP gap weight
    delta_acc: 0.2       # Accuracy weight
    delta_acc_init: 0.2
    delta_acc_min: 0.01
    
    # Temperature
    tau: 1.0
    tau_init: 1.0
    tau_min: 0.1
    tau_anneal: true
    tau_anneal_rate: 0.95
    
    # Server momentum
    server_momentum: 0.8
    
    # Bias detection thresholds
    bias_threshold_eo: 0.15
    bias_threshold_fpr: 0.15
    bias_threshold_sp: 0.10
    
    # Weight bounds
    epsilon: 0.01
    weight_clip: 10.0
    
  # Pareto-Fair Aggregation (new)
  algo:
    mgda:
      normalize_grads: true
      solver: "qp"
      step_size: 1.0
    pcgrad:
      enabled: true
    cagrad:
      enabled: true
      rho: 0.5
    
    # Fairness duals (optional hard constraints)
    fairness_duals:
      enabled: false
      epsilon_eo: 0.02
      epsilon_fpr: 0.02
      lr: 0.1
    
    # Demographics-free bias discovery
    arl:
      enabled: true
      eta: 1.0
      width: 64
      depth: 1
    
    # Fair client selection
    selector:
      enabled: true
      mode: "lyapunov"
      tau: 0.02
      kappa: 0.5
    
    # Knowledge distillation
    distill:
      enabled: false
      temperature: 2.0
      steps: 200
      batch_size: 64
    
    # Privacy (reuse repo settings)
    dp:
      enabled: false
      clip: 1.0
      noise_mult: 0.6