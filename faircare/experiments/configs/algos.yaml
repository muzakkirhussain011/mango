# faircare/experiments/configs/algos.yaml
# Algorithm-specific configurations including FairCare-FL v2.0

fedavg:
  training:
    algo: "fedavg"
  algo:
    weighted: true

fedprox:
  training:
    algo: "fedprox"
  algo:
    fedprox_mu: 0.01

qffl:
  training:
    algo: "qffl"
  algo:
    q: 2.0
    q_eps: 0.0001

afl:
  training:
    algo: "afl"
  algo:
    afl_lambda: 0.1
    afl_smoothing: 0.01

fairfate:
  training:
    algo: "fairfate"
  fairness:
    alpha: 1.0
    beta: 0.5
    gamma: 0.5
    delta: 0.1
    tau: 1.0
    epsilon: 0.01

# FairCare-FL v2.0 with PFA + DFBD + CALT
faircare_fl:
  training:
    algo: "faircare_fl"
  fairness:
    version: "2.0.0"
    
    # Client-side CALT parameters
    prox_mu: 0.0
    lambda_irm: 0.5
    lambda_adv: 0.2
    use_mixup: true
    use_cia: true
    
    # Server-side PFA parameters
    server_momentum: 0.8
    mgda_normalize_grads: true
    mgda_solver: "qp"
    mgda_step_size: 1.0
    pcgrad_enabled: true
    cagrad_enabled: true
    cagrad_rho: 0.5
    
    # Fairness dual ascent (optional constraints)
    fairness_duals_enabled: true
    epsilon_eo: 0.02
    epsilon_fpr: 0.02
    epsilon_sp: 0.02
    dual_lr: 0.1
    
    # Demographics-free bias discovery (DFBD)
    arl_enabled: true
    arl_eta: 1.0
    arl_width: 64
    arl_depth: 1
    
    # Fairness-aware client selection
    selector_enabled: true
    selector_mode: "lyapunov"
    selector_tau: 0.02
    selector_kappa: 0.5
    
    # Optional distillation
    distill_enabled: false
    distill_temperature: 2.0
    distill_steps: 200
    distill_batch_size: 64
    
    # Privacy settings (reuse repo toggles)
    dp_enabled: false
    dp_clip: 1.0
    dp_noise_mult: 0.6
    
    # Legacy/compatibility parameters
    gate_mode: "learned"
    lambda_fair: 0.1
    lambda_fair_init: 0.1
    lambda_fair_min: 0.01
    lambda_fair_max: 2.0
    tau: 1.0
    tau_init: 1.0
    tau_min: 0.1
    delta_acc: 0.2
    delta_acc_init: 0.2
    delta_acc_min: 0.01
    
    # Weight constraints
    epsilon: 0.01
    weight_clip: 10.0
    
    # Fairness metric weights (for legacy compatibility)
    alpha: 1.0           # EO gap weight
    beta: 0.5            # FPR gap weight  
    gamma: 0.5           # SP gap weight